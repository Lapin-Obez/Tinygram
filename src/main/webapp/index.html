<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TinyGram</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="google-signin-scope" content="profile email">
<meta name="google-signin-client_id" content="TODO">

<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="https://unpkg.com/jwt-decode/build/jwt-decode.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>


<script src="https://unpkg.com/mithril/mithril.js"></script>

</head>
<body>
    <script>
        var user	
        function handleCredentialResponse(response) {
            console.log("callback called:"+response.credential)
            // decodeJwtResponse() is a custom function defined by you
            // to decode the credential response.
            const responsePayload = jwt_decode(response.credential);
            console.log("ID: " + responsePayload.sub);
            console.log('Full Name: ' + responsePayload.name);
            console.log('Given Name: ' + responsePayload.given_name);
            console.log('Family Name: ' + responsePayload.family_name);
            console.log("Image URL: " + responsePayload.picture);
            console.log("Email: " + responsePayload.email);
            user = responsePayload.given_name + " " + responsePayload.family_name;
            document.getElementById('valeur').value = user
            /*const url = "_ah/api/myApi/v1/Hello"+'?access_token=' + response.credential
            fetch(url).then(response => response.text()).then(data => )*/
        }


    </script>
</body>
</html>